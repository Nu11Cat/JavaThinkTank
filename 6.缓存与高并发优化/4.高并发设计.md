# 目录

## **一、高并发系统设计基础理论**  
1. **CAP定理与高可用性权衡**  
   • 一致性（C） vs 可用性（A）在电商、社交场景的取舍  
   • 分区容错性（P）的实践意义：异地多活与脑裂处理  
2. **性能指标与评估模型**  
   • QPS、TPS、RT、吞吐量的关系与监控埋点  
   • 利特尔法则（Little's Law）在容量规划中的应用  
   • 压力测试模型：阶梯式压测 vs 脉冲式流量模拟  

---

## **二、高并发架构核心设计**  
1. **流量接入层设计**  
   • 四层/七层负载均衡选型：Nginx、LVS、云厂商SLB  
   • 动态流量调度：一致性哈希与加权轮询算法实战  
   • API网关核心功能：限流、熔断、鉴权（Spring Cloud Gateway实战）  
2. **服务层设计**  
   • 无状态化与Session管理：Redis Cluster分布式会话  
   • 微服务拆分原则：DDD边界上下文与康威定律  
   • 异步化设计：MQ解耦与响应式编程（Project Reactor）  
3. **数据层设计**  
   • 缓存策略：热点探测与动态预热（Caffeine+Redis多级缓存）  
   • 数据库扩展：分库分表（ShardingSphere） vs 读写分离（MySQL Group Replication）  
   • 最终一致性方案：CDC（Debezium）与Saga事务补偿  

---

## **三、高并发关键组件优化**  
1. **连接池与线程池调优**  
   • HikariCP参数深度解析：maxPoolSize、idleTimeout  
   • Tomcat线程池模型：acceptCount、maxConnections与NIO优化  
   • 异步非阻塞改造：WebFlux vs Tomcat NIO2  
2. **分布式锁与幂等性**  
   • Redis Redlock陷阱与改进方案（Redisson看门狗）  
   • 数据库唯一索引与CAS乐观锁实现幂等  
   • 雪花算法（Snowflake）的时钟回拨问题与解决方案  
3. **容错与降级策略**  
   • 熔断器模式对比：Hystrix vs Sentinel vs Resilience4j  
   • 降级策略分级：静态降级（兜底数据） vs 动态降级（流量比例）  
   • 集群容灾：同城双活 vs 异地多活（单元化架构）  

---

## **四、数据库高并发实战**  
1. **MySQL高并发优化**  
   • InnoDB原理：Change Buffer与自适应哈希索引  
   • 锁优化：意向锁、间隙锁与死锁检测（show engine innodb status）  
   • 高性能写入：Batch Insert与Load Data加速  
2. **NoSQL选型与调优**  
   • Redis集群：Codis vs Redis Cluster vs 云厂商Proxy方案  
   • Elasticsearch性能调优：分片策略、refresh_interval与merge策略  
   • MongoDB分片集群：chunk大小与balancer迁移阈值  
3. **分布式事务与一致性**  
   • 柔性事务方案：Seata AT模式 vs TCC模式  
   • 消息事务最终一致性：RocketMQ事务消息设计  
   • 分布式快照隔离：TiDB悲观锁与乐观锁实践  

---

## **五、容灾与弹性伸缩**  
1. **容灾设计**  
   • 故障注入测试：Chaos Engineering实战（ChaosBlade）  
   • 数据备份策略：全量快照 vs 增量日志（Binlog+Redo Log）  
   • 跨机房容灾：VIP切换与DNS流量切量  
2. **弹性伸缩策略**  
   • 水平扩展：Kubernetes HPA与Cluster Autoscaler  
   • 垂直扩缩容：JVM堆内存动态调整（JDK12+ Elastic Metaspace）  
   • Serverless架构：冷启动优化与预留实例  

---

## **六、性能监控与调优体系**  
1. **全链路监控**  
   • 指标采集：Prometheus + Micrometer  
   • 链路追踪：SkyWalking vs Zipkin（TraceID透传与采样策略）  
   • 日志分析：ELK Stack与实时告警（Kibana Watcher）  
2. **性能瓶颈定位**  
   • CPU密集型问题：火焰图（Async Profiler）与JFR热点分析  
   • IO密集型问题：磁盘调度算法（CFQ/deadline）与网络中断绑定  
   • 内存泄漏排查：MAT内存快照分析与GC日志解读  
3. **容量规划与成本优化**  
   • 容量模型：线性扩展与阿姆达尔定律  
   • 云资源优化：预留实例 vs 竞价实例 vs 自动伸缩组  
   • 能效比计算：TPS/Watt（每瓦特事务数）与绿色计算  

---

## **七、面试高频题与架构师思维**  
1. **大厂设计题解析**  
   • 设计一个支撑百万QPS的秒杀系统  
   • 如何实现微博热搜榜的实时更新？  
   • 抖音Feed流的分发架构设计  
2. **架构师思维模型**  
   • 折衷艺术：性能 vs 成本 vs 交付速度  
   • 技术选型方法论：社区活跃度 vs 团队技术栈 vs 长期维护成本  
   • 架构演进路径：单体 → 服务化 → 平台化 → Serverless  
3. **技术趋势与前沿**  
   • 云原生架构：Service Mesh（Istio）与Serverless Database  
   • 存算分离：Snowflake架构与云原生数仓  
   • AIOps：基于机器学习的故障预测与自愈  

---

## **八、实战案例深度复盘**  
1. **电商大促场景**  
   • 流量预估误差的应急方案：动态降级与弹性扩容  
   • 订单超卖问题：Redis+Lua库存扣减与数据库最终校验  
   • 支付链路优化：异步通知与对账系统设计  
2. **社交平台Feed流**  
   • 推拉结合模式下的存储优化：冷热分离与压缩算法  
   • 实时互动挑战：点赞计数器（HyperLogLog）与消息洪泛控制  
   • 热点事件应对：动态限流与边缘计算（CDN+Edge Node）  
3. **金融交易系统**  
   • 低延迟设计：内核旁路（Kernel Bypass）与零拷贝（Zero-Copy）  
   • 强一致性保障：Paxos/Raft在资金账户中的应用  
   • 风控系统设计：实时规则引擎（Flink CEP）与异步审核  

---

## **附录：高并发设计工具箱**  
1. **开源框架清单**  
   • 流量治理：Sentinel、Envoy  
   • 数据中间件：Canal、MaxWell、DataX  
   • 压测工具：JMeter、wrk、Tank  
2. **云服务选型指南**  
   • AWS：Aurora Global Database vs DynamoDB  
   • 阿里云：PolarDB vs Tablestore  
   • 腾讯云：TDSQL-C（CynosDB）与CKafka  
3. **学习资源图谱**  
   • 经典书籍：《Designing Data-Intensive Applications》《企业IT架构转型之道》  
   • 论文导读：Google Spanner、Amazon Dynamo  
   • 社区推荐：High Scalability、InfoQ架构案例  

---

